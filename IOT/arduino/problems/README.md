# ERROR and BUGS

## Wemos D1 mini 보드 납땜

Wemos D1 mini 보드에 초음파 센서가 작동하는지 확인하고 wifi로 통신하는 것을 보려고 했으나..

[설정](https://glorlfy.tistory.com/4
)과 [회로도](http://www.esp8266learning.com/wemos-mini-hc-sr04-ultrasonic-sensor.php)를 구글링해서 잘 적용한 것 같은데도 너무 안되서 진행이 막혔다..

값이 0만 뜨고있다..

납땜을 작업할 도구가 없어 납땜없이 wemos D1 mini 보드만을 사용했는데 이 때문에 보드와 전선이 잘 연결이 되지 않아 값이 0만 측정되는 것이었다..

정확히 하루 날렸다.

### 인두 문제

그 후 납땜을 진행해보려고 하는데, 인두에는 이미 납이 묻어있고 온도도 110도와 220도만 설정할 수 있어서 불안했다.   
가지고 있는 것이 인두와 납 밖에 없고 부가적인 장비가 없어서 유튜브에서 납땜하는 동영상이나 팁을 보고 진행하게 되었다.

참고한 동영상
- https://www.youtube.com/watch?v=H8R8x8BKjII
- https://www.youtube.com/watch?v=TAKn4N3bdKI

가지고 있던 인두의 와트가 20W인 것도 있지만.. 인두 끝부분에 납이 묻어있는 수준이 아니라, 태운것이었다.   
때문에 끝부분으로는 열이 잘 가해지지 않아서 인두 중간부분에서 납을 녹이고 녹인 납이 식기 전에 기판에 옮기는 이상한 방식으로 겨우겨우 납땜을 진행하였다. 그래도 열이 강한 인두는 아닌지 기판이 상하지는 않았다.

너무너무 납이 안 녹아서 사용하는 핀에만 납을 녹이고 다른 부분은 녹이지 않았다.

## Wemos D1 mini 전원 공급

wifi를 통해 초음파 센서의 값을 `무선으로` 라즈베리파이 혹은 노트북에 전송한다는 것은 전원도 배터리를 사용해야한다는 의미이다. 그런데 그것을 생각하지 못하다가 벽에 붙일 생각을 하고나서야 배터리를 구할 생각을 하게 되었다.

원래는 리튬폴리머배터리 1000mAh 가지고 있는 빵판의 크기(5cm * 3.5cm)와 비슷한 것으로 구하려고 하였으나, 해당 배터리의 충전 단자와 케이블과 어댑터 등등이 없어서 단순히 AA배터리홀더를 주문하고 약간의 작업을 통해 전원 공급을 할 배터리를 만들게 되었다.

필자의 회로도를 보신 컨설턴트님이 회로도의 이상함을 느껴 이야기하다가[ESP8266 WeMos D1 Mini 스펙](https://diyi0t.com/esp8266-wemos-d1-mini-tutorial/)을 보게되었다. 단순히 3V의 전원으로는 작동을 하지 않는다고 말해주셨다. 

스펙을 알아야 된다고 알고는 있었지만, 기능 구현에 급해서 찾아야 된다는 생각 자체를 못했던것 같다; 매일 컨설턴트님에게 열심히 질문하다가 알아차려서 다행이었다 @,.@

[wemos 공식 홈페이지](https://www.wemos.cc/en/latest/d1/d1_mini_lite.html)를 보아도 이해가 안되어서 찾아보게된 [동영상](https://www.youtube.com/watch?v=z6Vgy1cY0XU)을 통해서 어떻게 만들어야할지 알게되었다. 사용하고 있는 wemos D1 mini battery shield라는 추가로 납땜을 더 해야한다는 사실에 (현재 가진 인두기 성능이 너무 안좋아서) 인두기와 납을 새로 사야할 것 같다... 

### wemos D1 mini battery shield 터넥터

우선 먼저 새 인두기를 샀다. 비싸고 질 좋은 것은 아니었지만 행복했다.

커넥터가 맞지 않아 두 전극의 전선을 직접 납땜을 하여서 배터리를 사용했다. 피복을 벗기는 도구도, 자르는 도구도 없었기 때문에 칼로 대체하여 진행하였다.

손은 2개인데 잡아야 하는 것은 전선, 아두이노 보드, 인두기 3개로 도저히 하기 힘들어서 먼저 전선에 납을 녹이고 이 상태의 전선을 그대로 보드 위에 놓고 납은 한번 더 녹여서 붙여 납땜하였다.

그런데 이후에 3번 전극의 전선이 떨어져서 또 문제가 되었다. 새 인두기를 사용하고 있었기 때문에 납땜하는 것이 문제가 되지는 않았다.

<img src="https://user-images.githubusercontent.com/19484971/185298700-ac76a625-13bf-4c05-8d74-d0df86436e57.jpg" width=400>

> \+ 전극이 떨어진 상황

그때그때 납땜을 다시 해주기는 하였으나 새로 납 제거 테이프를 사기 전까지는 이미 코드에 녹인 납을 제거할 방법이 없었기 때문에 힘들게 붙여주었다. 

## WebSocket 통신 고정 IP

WebSocket에서 고정 IP를 설정할 수 있다고 많이 [작성](https://blog.naver.com/smserial/221310020331)되어있는데.. config하면 false만 반환되어 적용이 안되고 있다.

[유투브 동영상](https://www.youtube.com/watch?v=1BrsD2fxSpc)을 참고해서 서브넷과 게이트웨이를 맞춰주었고 설정도 추가로 변경해보았지만 변경되지 않았다.

도중에 Socket.io로 변경하여 해당 문제는 해결하지 않고 넘어가게 되었다.